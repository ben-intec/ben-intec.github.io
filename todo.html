<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Todo</title>
    <link rel="shortcut icon" type="image/png" href="images/ic_todo.png"/>
    <script type="module" src="js/scripts-header.js"></script>
    <link rel="stylesheet" href="css/scripts.css">
</head>
<body>
<script-header></script-header>
<div class="container"><label>Select a todo by number (from 1 to 200)</label>
    <input type="number" id="todo-number" name="quantity" min="0" max="201" value="1">
    <button id="fetch-todo"> get</button>
    <div id="todo-output">

    </div>
</div>
<script>
    const input_number = document.getElementById("todo-number");
    input_number.addEventListener('change', (e) => {
        let max = input_number.max - 1;
        let min = input_number.min + 1;
        let val = e.target.value;

        if (val > max) {
            e.target.value = min;
        } else if (val < min) {
            e.target.value = max;
        }
    });
</script>
<script>
    const btn_fetch_todo = document.getElementById('fetch-todo');
    btn_fetch_todo.addEventListener('click', () => {

        let value = document.getElementById("todo-number").value;

        if (value < 1 || value > 200) {
            alert('Please select a valid todo number and try again')
            return;
        }


        fetch('https://jsonplaceholder.typicode.com/todos/' + value)
            .then(response => response.json())
            .then(todo => {
                document.getElementById("todo-output").innerHTML = '<fieldset>' +
                    '<legend>TODO ' + value + '</legend>' +
                    '<p>' +
                    '    "userId": ' + todo.userId + '<br>' +
                    '    "id": ' + todo.id + '<br>' +
                    '    "title": ' + todo.title + '<br>' +
                    '    "completed": ' + todo.completed + '<br>' +
                    '</p>' +
                    '</fieldset>';
                return;
            });

    })

</script>
</body>
</html>